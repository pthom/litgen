* Emacs tips

** General
M = Alt
C = Ctrl
M-x = select / search command

C-g : quit current command

** Org mode tips
*** Basics

[[https://orgmode.org/orgguide.html#Introduction][Org mode quick guide]]
Link to org [[https://orgmode.org/][mode homepage]] (M-x org-insert-link)
[[https://orgmode.org/worg/org-tutorials/org4beginners.html][org4beginners]]


*** Tab or Shift-Tab on * to collapse locally or globally
Ctrl-Enter to enter a new title of same level below sub-hierarchy
Alt-Enter to enter a new title directly under
Alt-Up/Down to move sections

Format text: Here is *some* content, and some //italic//

*** diagrams and drawings


(local-unset-key "M-a")
(define-prefix-command 'pascal-map)
(define-key pascal-map (kbd "s") 'org-babel-execute-src-block)
(local-set-key (kbd "M-a") 'pascal-map)
(setq org-confirm-babel-evaluate nil)

*** With mermaid

Installed https://github.com/arnm/ob-mermaid

See doc of mermaid, run mermaid via C-c C-c
Display images via `org-display-inline-images` (M-x to select action)
Also toggle display via C-c C-x C-v (wtf is that shortcut!)


#+begin_src mermaid :file doc/diagrams/test.png
sequenceDiagram
 A-->B: Works!
 B-->C: Again!q
#+end_src

#+RESULTS:
[[file:doc/diagrams/test.png]]

*** With Plantuml


#+begin_src plantuml :file doc/diagrams/test_puml.png
title Authentication Sequence

Alice->Bob: Authentication Request
note right of Bob: Bob thinks about it
Bob->Alice: Authentication Response
#+end_src

#+RESULTS:
[[file:doc/diagrams/test_puml.png]]



*** Tables: start adding | then use Tab key for magic
| Name  | Age | Sex |
|-------+-----+-----|
| David |  37 | M   |
|       |     |     |



*** Lists: use Alt-Enter / use Alt-Shift-Enter (i.e M-S-RET) to  add checkboxes

- [ ] First item
- [ ]
- Second Item
- Third

Example:



*** Code blocks : #+begin_src lang / #+end_src (C-C ' to edit the code block in separate buffer)

#+NAME example (optional name)
#+begin_src cpp
  int main()
  {
    return 0;

  }
#+end_src


*** TODOs List (C-c C-t )

*** Item 1
*** DONE Item

CLOSED: [2022-09-18 Sun 10:54]



**** Sub Heading
**** A
   int a = 0



* immvision

** demo mandelbrot emscripten multithread:

Test multithread qui semble marcher:
    voir /Users/pascal/dvp/OpenSource/ImGuiWork/hello_imgui/build_emscripten
    et /Users/pascal/dvp/OpenSource/ImGuiWork/hello_imgui/src/hello_imgui_demos/thread_ems/thread_ems.main.cpp

    En gros, ca marche avec Firefox et Chrome.
    plein de modifs:
       1. Server web qui Envoie des headers necessaires pour rendre multithread accepté
          /Users/pascal/dvp/OpenSource/ImGuiWork/hello_imgui/src/hello_imgui_demos/thread_ems/simple-cors-http-server.py
       2. Pas de sleep ni de join sur thread principal!
       3. options de compil : faire choix dans
          - supprimer -s ALLOW_MEMORY_GROWTH=1 ?
          - add_compile_options("-pthread")
            add_link_options("-pthread")
          + add_compile_options("-sPTHREAD_POOL_SIZE=100")
          + add_compile_options("-sINITIAL_MEMORY=167772160")



* srcml_cpp

** srcml_cpp as main project
...
** ideas / other utilities


Add named parameters to functions

Cerealize / cerealize

PimpMyCI:
    check for doc
    check for snake_case
    hunt_fake_classes
       "a class with a constructor and only one public function is not a class. Use a namespace!"
       Example / Mailer
       prefix class members


* PimplMyClass

review code => simplify and review srcmlcpp

command line
  integration tests


online service
  layout on one page:
     Big Form / Implementation Code
     Render[ImplCode]       Render[GlueCode]
                            Render[PublishedApi]


render code block api (-> codemanip)
  render as collapsible
  copy button


** Triage
Online:
  store ran codes
  short link service?
  example page

mettre un decorateur @pimplmyclass

* Dyndoc
Voir note sur telephone

* Litgen doc
** Sources de stubs connues: $
Voir https://github.com/python/typeshed and https://github.com/microsoft/python-type-stubs

** Alternatives a litgen:
        https://pybind11.readthedocs.io/en/stable/compiling.html#generating-binding-code-automatically
        AutoWIG:
            https://www.youtube.com/watch?v=N4q_Vud77Hw


** Diagram srcmlcpp and litgen adapted classes

Failed attempt to remove confirmation for C-c C-c
(setq org-confirm-babel-evaluate f)

#+begin_src plantuml :file packages/srcmlcpp/doc/srcml_cpp_diagram.png
  class ET.Element
  package srcmlcpp {
          class SrcmlOptions {
                  + encoding
                  +preserve_empty_lines
                  ...
          }

          class SrcmlXmlWrapper {
                  + options: SrcmlOptions
                  + srcml_xml: ET.Element
                  + parent: opt[SrcmlXmlWrapper]

                  + str_code_verbatim()
                  + str_xml()
                  ...
          }

          SrcmlXmlWrapper <|... SrcmlXmlWrapper: opt(parent)
          SrcmlXmlWrapper *-- ET.Element
          SrcmlXmlWrapper o-- SrcmlOptions

          class CppElement {
                  + str_code()
                  + visit...()
          }

          class CppElementComments {
                  comment_on_previous_lines: str
                  comment_end_of_line: str
          }

          CppElement --|> SrcmlXmlWrapper

          class CppElementAndComment {
                  cpp_element_comments
          }
          CppElementAndComment --|> CppElement
          CppElementAndComment *-- CppElementComments


          /'
          CppEmptyLine --|> CppElementAndComment
          CppUnprocessed--|> CppElementAndComment
          '/

          class CppBlock {
                  block_children: List[CppElementAndComment]
          }

          CppBlock *-- CppElementAndComment : List

          class CppUnit {
                  "Represent a full file"
          }
          CppUnit --|> CppBlock

          class CppBlockContent {
                  "used by function and anonymous blocks"
          }

          CppBlockContent --|> CppBlock


          class CppPublicProtectedPrivate {
                  + access_type
                  + default_or_explicit
          }
          CppPublicProtectedPrivate --|> CppBlock

          class CppType {
                  typenames: List[str]
                  specifiers: List[str]
                  modifiers: List[str]
          }

          CppType --|> CppElement

          class  CppDecl {
                  cpp_type: CppType
                  decl_name: str
                  c_array_code: str
                  initial_value_code: str
          }

          CppDecl *-- CppType
          CppDecl --|> CppElementAndComment

          class CppDeclStatement {
                  cpp_decls: List[CppDecl]
          }

          CppDeclStatement --|> CppElementAndComment
          CppDeclStatement *-- CppDecl : List

          class CppParameter {
                  decl: CppDecl
                  template_type: CppType
                  template_name: str = ""
          }
          CppParameter --|> CppElementAndComment
          CppParameter *-- CppDecl


          class CppParameterList {
                  List of parameters of a function
                  parameters: List[CppParameter]
          }

          CppParameterList *-- "many" CppParameter

          class CppTemplate {
                  "Template parameters"
                  + parameter_list: CppParameterList
          }
          CppTemplate *-- CppParameterList
          CppTemplate --|> CppElement


          class CppFunctionDecl {
                  "function or method"
                  specifiers: List[str]
                  return_type: CppType
                  parameter_list: CppParameterList
                  template: CppTemplate
                  is_auto_decl: bool
                  function_name: str
          }

          CppFunctionDecl --|> CppElementAndComment
          /' CppFunctionDecl *-- CppType: return_type '/
          CppFunctionDecl *-- CppParameterList
          CppFunctionDecl *-- CppTemplate : optional


          class CppFunction {
                  block
          }
          CppFunction --|> CppFunctionDecl
          CppFunction *-- CppBlockContent

          CppConstructorDecl --|> CppFunctionDecl
          CppContructor --|> CppFunction

          /'
          class CppSuper {
                  specifier
                  superclass_name
          }
          '/

          class CppSuperList {
                  super_list: List[CppSuper]
          }
          /'CppSuperList *-- "many" CppSuper'/
          CppSuperList --|> CppElement


          class CppStruct {
                  class_name: str
                  super_list: CppSuperList
                  block: CppBlock
                  template: CppTemplate

                  +get_public_blocks()
                  +get_public_elements()
                  ...
          }
          CppStruct *-- CppBlock
          CppStruct *-- CppTemplate
          CppStruct *-- CppSuperList

          CppClass --|> CppStruct


          /'CppComment --|> CppElementAndComment'/

          class CppNamespace {
                  ns_name: str
                  block: CppBlock
          }
          CppNamespace --|> CppElementAndComment
          CppNamespace *-- CppBlock

          class CppEnum {
                  block: CppBlock
                  enum_type
                  enum_name
          }

          CppEnum --|> CppElementAndComment
          CppEnum *-- CppBlock
  }


  package litgen {

          class LitgenOptions {
          }

          class AdaptedElement {
                  _cpp_element: CppElementAndComment
                  options: LitgenOptions
                  +str_stub()
                  +str_pydef()
          }
          AdaptedElement *-- CppElementAndComment
          AdaptedElement o-- LitgenOptions

          class AdaptedBlock
          AdaptedBlock --|> AdaptedElement
          AdaptedBlock ... CppBlock

          class AdaptedNamespace
          AdaptedNamespace --|> AdaptedElement
          AdaptedNamespace ... CppNamespace

          class AdaptedDecl
          AdaptedDecl --|> AdaptedElement
          AdaptedDecl ... CppDecl

          AdaptedClassMember --|> AdaptedDecl

          class AdaptedClass {
                  adapted_public_children
          }
          AdaptedClass ... CppClass
          AdaptedClass --|> AdaptedElement
          AdaptedClass *-- AdaptedClassMember: members
          AdaptedClass *-- AdaptedFunction: methods

          AdaptedParameter --|> AdaptedElement
          AdaptedParameter ... CppParameter

          class AdaptedFunction {
                  return_value_policy
                  ...
          }
          AdaptedFunction --|> AdaptedElement
          AdaptedFunction o... CppFunctionDecl

  }

#+end_src

#+RESULTS:
[[file:packages/srcmlcpp/doc/srcml_cpp_diagram.png]]


insert diagram via mermaid (see integration with emacs)



* Hello ImGui Bundle TOOO
later! publish srcmlcpp before!
** auto-resize and other goodies from immvision
** Add imgui-node-editor ?
  Much later, add it to suggestions ?
  Needs to add its application class (which provides zooming: see when running example)



* Litgen TODO

** Wish list / hard
*** mypy: no_implicit_reexport
*** issue with mypy compatibility with generated modules

Problem 2: dans lg_skbuild_template, tout est accpté dans example_lib...
Problem 3: dans lg_test_runner (integration tests), tout est refusé (trouve pas les définitions)


*** Suffixe MY_API sur namespace ne sert qu'a faire ch...
    Plutot faire une liste de


** Wish List / Easy

  stackoverflow: review question ("type annotation: warn about mutable members becoming instance when initialized at decl site")
    https://docs.python.org/3/library/typing.html#typing.ClassVar


** DONE: Handle operators()
References:
https://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B
https://docs.python.org/3/reference/datamodel.html#emulating-numeric-types




** Template classes and functions
(by asking for a specialization name)
templated functions can reuse the same name


** Namespace:
Non : voir si possible retrouver same namespace par recherche dans CppUnit ou AdaptedCppUnit


** Handle trampoline
    add unit tests?
    same for protected?



See example in py-mahi-gui
On ne fait qu'un niveau de derivation, c'est tout!



** DONE: Hande Binding protected member functions
   X Output publicist inside glueCode
   X Rename boxed_type to GlueCode
   X Try put Glue code in main pydef file



** https://pybind11.readthedocs.io/en/stable/advanced/pycpp/numpy.html#vectorizing-functions

** Handle (deep)copy

** Interactive demo



Export notebook:
https://mljar.com/blog/jupyter-notebook-html/

https://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions/toc2/README.html

   Issue with toc:
     See https://github.com/ipython-contrib/jupyter_contrib_nbextensions/issues/1533
       (jinja2.exceptions.TemplateNotFound: toc2)
